generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

datasource db {
  provider = "mongodb"
  url      = env("MONGO_URI")
}

model User {
  id                     String   @id @default(auto()) @map("_id") @db.ObjectId
  firebaseUid            String   @unique
  email                  String   @unique
  gender                 String?
  age                    Int?
  height                 Float?
  currentWeight          Float?
  bmiStatus              String?
  goal                   String?
  bodyType               String?
  targetWeight           Float?
  dreamBodyShape         String?
  focusOn                String[] // List of strings
  workoutExperiance      String?
  fitness                String?
  self_assessed_activity String?
  knee                   Boolean?
  squat_reps             String?
  pushups_reps           String?
  crunches_reps          String?
  plank_reps             String?
  walk_daily             String?
  badHabit               String[] // List of strings
  lifeStyle              String?
  idealWeight            String?
  sleepTime              String?
  GetupTime              String?
  wakeupTime             String?
  feelStressed           String?
  motivate               String[] // List of strings
  workOutPlace           String[] // List of strings
  excludeloud            String?
  eventcomingup          String?
  eventTime              String?
  commitTime             String?
  LengthWorkout          Int?
  profileName            String?
  planPace               String?
  trainingDays           String[] // List of strings
  remainders             Boolean?
  hearAbout              String?
  workoutDuration        String   @default("10-15 min")
  warmupDuration         String   @default("3 min") // 3min
  recoveryDuration       String   @default("5-10 min")

  subscriptionStatus String    @default("FREE") // Values can be "FREE" or "PREMIUM"
  subscriptionExpiry DateTime? // To know when the subscription ends
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
}

model Exercise {
  id                   String                 @id @default(auto()) @map("_id") @db.ObjectId
  exerciseName         String                 @unique
  description          String?
  category             String[]
  Hints                String?
  Breathing            String?
  videoUrl             String?
  thumbnailUrl         String?
  imageUrl             String?
  caloriesBurnedPerRep Int?
  isPremium            Boolean                @default(false)
  dailyWorkouts        DailyWorkoutExercise[]
  createdAt            DateTime               @default(now())
  updatedAt            DateTime               @updatedAt
}

model DailyWorkout {
  id            String                 @id @default(auto()) @map("_id") @db.ObjectId
  name          String
  description   String
  estimatedTime Int
  TotalCalories Int?
  exercises     DailyWorkoutExercise[]
  week          WeeklyScheduleDay[]
  createdAt     DateTime               @default(now())
  updatedAt     DateTime               @updatedAt
}

model DailyWorkoutExercise {
  id              String       @id @default(auto()) @map("_id") @db.ObjectId
  dailyWorkoutId  String       @db.ObjectId
  dailyWorkout    DailyWorkout @relation(fields: [dailyWorkoutId], references: [id])
  exerciseId      String       @db.ObjectId
  exercise        Exercise     @relation(fields: [exerciseId], references: [id])
  sets            Int?
  reps            String?
  durationSeconds Int?
  order           Int
}

model FitnessCategory {
  id              String            @id @default(auto()) @map("_id") @db.ObjectId
  name            String            @unique
  description     String
  mainWorkoutPlan MainWorkoutPlan[]
}

model MainWorkoutPlan {
  id                String          @id @default(auto()) @map("_id") @db.ObjectId
  name              String
  cardio            Int? // rank between 1 to 5
  Strength          Int? // rank bteween 1 to 5
  durationInWeeks   Int
  fitnessCategoryId String          @unique @db.ObjectId
  fitnessCategory   FitnessCategory @relation(fields: [fitnessCategoryId], references: [id])
  willAchieve       String[]
  howAchieve        String[]
  planOverview      PlanOverview[]
  // workoutPlan     WorkoutPlan?
}

model PlanOverview {
  id                String          @id @default(auto()) @map("_id") @db.ObjectId
  timeInWeek        String
  name              String
  description       String
  videoUrl          String[]
  mainWorkoutPlanId String          @db.ObjectId
  mainWorkoutPlan   MainWorkoutPlan @relation(fields: [mainWorkoutPlanId], references: [id])
}

model WorkoutPlan {
  id              String           @id @default(auto()) @map("_id") @db.ObjectId
  name            String //weight loss starter
  durationInWeeks Int
  difficulty      String
  isPremium       Boolean          @default(false)
  weeklySchedules WeeklySchedule[]
  // mainWorkoutPlanId String           @db.ObjectId @unique
  // mainWorkoutPlan   MainWorkoutPlan  @relation(fields: [mainWorkoutPlanId], references: [id])
  // assignments     UserPlanAssignment[]
}

model WeeklySchedule {
  id         String              @id @default(auto()) @map("_id") @db.ObjectId
  planId     String              @db.ObjectId
  plan       WorkoutPlan         @relation(fields: [planId], references: [id])
  weekNumber Int
  days       WeeklyScheduleDay[]
}

model WeeklyScheduleDay {
  id               String         @id @default(auto()) @map("_id") @db.ObjectId
  weeklyScheduleId String         @db.ObjectId
  weeklySchedule   WeeklySchedule @relation(fields: [weeklyScheduleId], references: [id])
  dayOfWeek        String
  dailyWorkoutId   String         @db.ObjectId
  dailyWorkout     DailyWorkout   @relation(fields: [dailyWorkoutId], references: [id])
}
